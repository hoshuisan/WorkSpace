<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>测试肌肤属性</title>
    <!-- stylesheets -->
    <link rel="stylesheet" href="css/swiper.min.css" type="text/css">
    <link rel="stylesheet" href="css/spa.css" type="text/css">
</head>
<body>
    <!-- 第一页 -->
    <section class="page1">
        <div class="swipers logo">
            <div class="welcome">
                <h3>主标题</h3>
                <p>副标题</p>
            </div>
            <a href="#" class="start">开始测试</a>
        </div>
    </section>

    <!-- 第二页 -->
    <section class="page2">
        <header class="head">
            <div class="swiper-pagination swiper-pagination-bullets pagination">
            </div>
        </header>
        <div class="swipers">
            <div class="swiper-container swiper-container-horizontal">
                <div class="swiper-wrapper">
                    <!-- 问题1 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>1</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="1" value="1"><span class="aFont">aaaaa</span>
                            </label>
                            <label>
                                <input type="radio" class="b" name="1" value="2"><span class="bFont">bbbbb</span>
                            </label>
                            <label>
                                <input type="radio" class="c" name="1" value="3"><span class="cFont">ccccc</span>
                            </label>
                            <label>
                                <input type="radio" class="d" name="1" value="4"><span class="dFont">ddddd</span>
                            </label>
                        </div>
                    </div>

                    <!-- 问题2 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>2</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="2" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="2" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="2" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="2" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题3 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>3</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="3" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="3" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="3" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="3" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题4 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>4</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="4" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="4" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="4" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="4" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题5 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>5</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="5" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="5" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="5" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="5" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题6 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>6</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="6" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="6" value="2">b
                            </label>
                                <label>
                                <input type="radio" class="c" name="6" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="6" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题7 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>7</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="7" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="7" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="7" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="7" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题8 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>8</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="8" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="8" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="8" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="8" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题9 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>9</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="9" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="9" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="9" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="9" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题10 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>10</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="10" value="1">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="10" value="2">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="10" value="3">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="10" value="4">d
                            </label>
                        </div>
                    </div>

                    <!-- 问题11 -->
                    <div class="swiper-slide">
                        <div class="question">
                            <h3>11</h3>
                        </div>
                        <div class="choice">
                            <label>
                                <input type="radio" class="a" name="11">a
                            </label>
                            <label>
                                <input type="radio" class="b" name="11">b
                            </label>
                            <label>
                                <input type="radio" class="c" name="11">c
                            </label>
                            <label>
                                <input type="radio" class="d" name="11">d
                            </label>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- 第三页 -->
    <section class="page3">
        <div class="result">
            <p id="result">这是结果</p>
        </div>
    </section>


    <!-- third-party javascript -->
    <script src="js/jq/jquery-3.1.1.min.js"></script>
    <script src="js/siwper/swiper.min.js"></script>

    <!-- our javascript -->
    <script>

        //记分设置
        $(document).ready(function(){
            $(".choice input[type = 'radio']").on("click",function(){
                if ($(".choice input:checked")){
                    $(this).parent().css("background" , "red").siblings().css("background","");
                }
            });
        });

        //count设置

        function count(){
            var localResult = 0;
            for (var i = 1;i <= 10;i++){
                var option = $(".choice input[name = '"+i+"']:checked");
                if (option.attr("class")){
                    var score = 0;
                    switch (option.attr("class")){
                        case "a":
                            score = score + 1;
                            break;
                        case "b":
                            score = score + 2;
                            break;
                        case "c":
                            score = score + 3;
                            break;
                        case "d":
                            score = score + 4;
                            break;
                        default :
                            break;
                    }
                    localResult += score;
                }
            }
            console.log(localResult);
            if (localResult <= 10){
                $("#result").text("小于等于10")
            }else if (localResult <= 20){
                $("#result").text("小于等于20")
            }else if (localResult <= 30){
                $("#result").text("小于等于30")
            }else{
                $("#result").text("小于等于40")
            }
        }


        //swiper设置
        var mySwiper = new Swiper (".swiper-container", {
            pagination: '.swiper-pagination',
            paginationBulletRender: function (swiper, index, className) {
                return '<span class="' + className + '">' + (index +　1) + '</span>';
            },
            slidesPerView: 1,
            paginationClickable: true,
            spaceBetween: 0,
            loop: false,
            simulateTouch : false,
            onReachEnd: function(swiper){
                $(".page2").hide();
                $(".page3").show();
            }
        });

        $(".page2 , .page3").hide();

        $(".start").on("click",function(){
            $(" .page1").hide();
            $(" .page2").show();
        });

        $(".swiper-container label,.swiper-container input").click(function(){
            var this_active = $(this).parents(".swiper-slide").index();
            setTimeout(function(){
                mySwiper.slideTo(this_active+1,500)
            },1500);

        });

        $('.swiper-button-next').click(function(){
            if(mySwiper .isEnd){
                $(".page2").hide();
                $(".page3").show();
            }
        });

        $(".page3").ready(finalCount);

        $('.swiper-pagination span:last').css("display","none");

        //最后统一计分
        function finalCount(){
            //存储选项值
            var valueArr = [];
            //总分值
            var value = 0;
            //已选长度
            var checkedLength;
            //题目个数
            var length = 10;
            //分值存入valueArr
            function count() {
                var $parent = $(this).parents('.swiper-slide');
                console.log($parent,$parent.index('.swiper-slide'))
                valueArr[$parent.index('.swiper-wrapper .swiper-slide')] = $(this).val();
                //触发自定义事件
                $('.swiper-wrapper').trigger('valueChange');
            }
            //点击触发计分
            $(".choice input[type = 'radio']").on("click", count);
            //绑定自定义事件
            $('.swiper-wrapper').on('valueChange',function(){
                checkedLength = $('.choice input:checked').length;
                //判断是否全选
                if(checkedLength==length){
                    value = 0;
                    console.log(valueArr);
                    valueArr.forEach(function(i){
                        value += Number(i);
                    });
                    $('#result').html(value);
                }
            })
        }
    </script>
</body>
</html>
